#!/bin/bash

if [[ "$1" = "-help" ]]; then
    echo -e "\nUsage prog -cat -add <category_name> <repository_name>"
    exit 0
else
    if [[ "$#" -lt 1 ]]; then
        echo -e "\nPlease enter the following information(s): \n"
        [ -z "$1" ] && read -p "Enter the category name: " CAT
    else
        CAT="$1"
    fi
fi

if [[ -f "Repository_Manager/src/.Update_Repositories/.Update_$CAT" ]]; then
    echo -e "\nError: The file for category '$CAT' already exist."
    exit 1
else
    touch "Repository_Mangager/src/.Update_Repositories/.Update_$CAT"
    cp Repository_Manager/config/.Default_Update "Repository_Mangager/src/.Update_Repositories/.Update_$CAT"
fi

read -p "Do you want to add a repository to your new category -> $CAT ? (yes/no) : " USER_CHOICE

while [[ $USER_CHOICE != "no" ]]; do
    echo
    read -p "Enter the repository name you want to add : " REPOSITORY_NAME
    bash prog -upt -repo -add "$CAT" "$REPOSITORY_NAME"
    echo
    read -p "Do you want to add a repository to your new category -> $CAT ? (yes/no) : " USER_CHOICE 
done